<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      i18n:domain="plone"
      tal:define="plone_view nocall:context/@@plone;
                  query_results view/results; ">


<body>

<metal:listingmacro define-macro="listing">

    <dl class=""
        tal:attributes="id view/data/div_id;
                        class string:portlet rtCollectionPortlet portletCollezione ${class}"
        tal:define="collection_url view/collection_url;
                    getIcon nocall:plone_view/getIcon;
                    class view/data/css_class|nothing;">

        <dt class="portletHeader">
          <a class="rss_feed" title="RSS feed"
            tal:condition="view/data/check_rss"
            tal:attributes="href view/rss_url">
                 <i class="fa fa-rss"></i>
            </a>

          <span class="portletTopLeft"></span>
            <span class="tile" tal:content="view/data/header" />
          <span class="portletTopRight"></span>
        </dt>
        <tal:events tal:repeat="obj query_results">
        <dd class="portletItem rtCollectionPortletItem"
            tal:define="item_path obj/getPath;
                        firstItem repeat/obj/start;"
            tal:attributes="class python:firstItem and 'portletItem firstItem collectionItem' or 'portletItem collectionItem'">
              <div class="contentItem">
                <h4 class="titleItem">
                  <tal:data condition="view/data/show_dates">
                    <span tal:condition="python: obj.EffectiveDate != 'None'"
                       class="dataItem"
                       tal:content="python: obj.effective.strftime('%d/%m/%Y')">12/12/2013
                    </span>
                   </tal:data>
                    <a href="#"
                             tal:attributes="href obj/getURL;">
                            <span tal:replace="obj/Title">
                              Title
                            </span>
                        </a>
                  </h4>

              </div>
        </dd>
        </tal:events>
        <dd class="portletItem rtCollectionPortletItem"
            tal:define="no_elements_text view/data/no_elements_text"
            tal:condition="python:no_elements_text and len(query_results)==0">
            <span class="portletBottomLeft"></span>
            <span>
            <div class="discreet" i18n:translate="" tal:content="no_elements_text" />
            </span>
            <span class="portletBottomRight"></span>
        </dd>

        <dd class="portletFooter">
          <tal:portletMore
              tal:define="show_more view/data/show_more"
              tal:condition="show_more">
              <a tal:condition="not:view/data/link_text" class="linkMore"
               tal:attributes="href collection_url"><span i18n:translate="more_url">More&hellip;</span></a>
              <a tal:condition="view/data/link_text" tal:attributes="href collection_url"  class="linkMore"><span tal:replace="view/data/link_text" /></a>
          </tal:portletMore>
        </dd>

    </dl>
</metal:listingmacro>

</body>
</html>
