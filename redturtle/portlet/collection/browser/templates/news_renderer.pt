<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      i18n:domain="plone"
      tal:define="plone_view nocall:context/@@plone;
                  query_results view/results; ">
<body>

<metal:listingmacro define-macro="listing">

    <div class=""
        tal:attributes="id view/data/div_id;
                        class string:blocco portlet-notizie ${class}"
        tal:define="collection_url view/collection_url;
                    getIcon nocall:plone_view/getIcon;
                    class view/data/css_class|nothing;">

        <div class="bloccoHeader" tal:condition="python: view.data.header or view.data.check_rss">
          <a class="rss_feed" title="RSS feed"
            tal:condition="view/data/check_rss"
            tal:attributes="href view/rss_url">
                 <i class="fa fa-rss"></i>
            </a>

          <span class="bloccoTopLeft"></span>
            <span class="tile" tal:content="view/data/header" />
          <span class="bloccoTopRight"></span>
        </div>
        <div class="bloccoItems">
            <tal:events tal:repeat="obj query_results">
                <div class="bloccoItem rtBloccoCollectionPortletItem"
                    tal:define="item_path obj/getPath;
                                real_obj obj/getObject;
                                have_image python: real_obj.getImage();
                                firstItem repeat/obj/start;
                                class python:have_image and 'bloccoItem image collectionItem' or 'bloccoItem collectionItem noimage'"
                    tal:attributes="class class">
                    <div class="imgItem"
                         tal:condition="python:obj.portal_type == 'News Item' and have_image">
                          <img src="" alt="" tal:attributes="src string:${obj/getURL}/image_mini; alt obj/Description;"/>
                    </div>
                    <h4 class="titleItem">
                    <tal:data condition="view/data/show_dates">
                      <span tal:condition="python: obj.EffectiveDate != 'None'"
                         class="dataItem"
                         tal:content="python: obj.effective.strftime('%d/%m/%Y')">12/12/2013
                      </span>
                     </tal:data>
                      <a href="#"
                         tal:attributes="href obj/getURL;"><span tal:replace="obj/Title">Title</span></a>
                    </h4>
                    <p class="news-description" tal:condition="obj/Description" tal:content="obj/Description"></p>
                </div>
            </tal:events>
        <div class="bloccoItem rtBloccoCollectionPortletItem"
            tal:define="no_elements_text view/data/no_elements_text"
            tal:condition="python:no_elements_text and len(query_results)==0">
            <span class="bloccoBottomLeft"></span>
            <span>
            <div class="discreet" i18n:translate="" tal:content="no_elements_text" />
            </span>
            <span class="bloccoBottomRight"></span>
        </div>

        <div class="bloccoFooter">
          <tal:portletMore
              tal:define="show_more view/data/show_more"
              tal:condition="show_more">
              <a tal:condition="not:view/data/link_text" class="linkMore"
               tal:attributes="href collection_url"><span i18n:translate="more_url">More&hellip;</span></a>
              <a tal:condition="view/data/link_text" tal:attributes="href collection_url"  class="linkMore"><span tal:replace="view/data/link_text" /></a>
          </tal:portletMore>
        </div>
        </div>
    </div>
</metal:listingmacro>

</body>
</html>
